<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="assets/images/logo.ico">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/index.css">

    <title>Reset Point</title>
</head>

<body>
    <!--<div id="loading" class="content">
        <img src="assets/images/logo.png" alt="logo">
        <div id="animatedLoading">
            <div id="loadingBar"></div>
            <p id="loadingText" class="jersey-15">LOADING......</p>
        </div>
    </div>-->

    <div id="lobby" class="const">
        <div id="profile">
            <img src="assets/images/userProfile.png" alt="user profile">
            <div id="profileDetail">
                <p id="profileName" class="lxgw-wenkai">用戶名稱</p>
                <p id="profileId" class="lxgw-wenkai">#05132468</p>
                <div id="profileExpBar"></div>
            </div>
        </div>
        <div id="lobbyBody">
            <div id="reseterData">
                <p class="lxgw-wenkai">體力</p>
                <div id="strength" class="dataBar"></div>
                <p class="lxgw-wenkai">智力</p>
                <div id="strength" class="dataBar"></div>
                <p class="lxgw-wenkai">敏捷</p>
                <div id="strength" class="dataBar"></div>
                <p class="lxgw-wenkai">運氣</p>
                <div id="strength" class="dataBar"></div>
            </div>
            <div id="game">
                <p id="gameName" class="noto-serif">甜蜜偽像</p>
                <div id="carousel"></div>
                <button id="enterBtn" class="jersey-15">ENTER</button>
            </div>
            <div id="mission">
                <div id="missionTitle">
                    <p class="jersey-15">MISSION</p>
                </div>
                <div id="missionDetail">

                </div>
            </div>
        </div>
        <div id="gameDetail">
            <div id="gameIntro">
                <p id="gameIntroTitle" class="lxgw-wenkai">副本介紹</p>
                <p id="gameIntroContent">Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto iusto fuga
                    eligendi, facere, dolores hic nostrum aut nemo laboriosam id ad fugit corrupti, fugiat nulla
                    voluptates
                    officia totam tempore enim.</p>
            </div>
            <div id="gameProgress">
                <p id="gameProgressTitle" class="lxgw-wenkai">副本進度 70%</p>
                <div id="gameProgressBar"></div>
                <p id="UnlockEndingTitle" class="lxgw-wenkai">解鎖結局（2/3）</p>
                <div class="UnlockEndingCircle"></div>
            </div>
        </div>
    </div>

    <script>
        /*const loadingBar = document.getElementById('loadingBar')
        const totalBlocks = 22
        const delayPerBlock = 300

        for (let i = 1; i <= totalBlocks; i++) {
            const block = document.createElement('div')
            block.className = 'loadingBlock'

            if (i == 1) {
                block.id = 'leftBlock'
            }
            if (i == totalBlocks) {
                block.id = 'rightBlock'
            }

            loadingBar.appendChild(block)

            setTimeout(() => {
                block.classList.add('visible')
            }, i * delayPerBlock)
        }

        const totalTime = (totalBlocks + 1) * delayPerBlock
        setTimeout(() => {
            const userJson = localStorage.getItem('user')

            if (userJson) {

            }
            else {
                window.location.href = 'reset.html'
            }

            document.getElementById('loading').style.display = 'none'
            document.getElementById('lobby').style.display = 'block'
        }, totalTime)*/

        const gameNames = [
            '甜蜜偽像',
            '點燈人',
            '航海日誌',
            'CV-E20',
            '上行失效',
            '鏡像修正',
            '下水道收信人',
            '複寫公寓',
            '幻象折射',
            '分紅日',
            '目擊者',
            '偏差筆錄'
        ]

        const carousel = document.getElementById('carousel');
        const cardCount = 12;
        const radius = 450;
        const step = 360 / cardCount;
        let angle = 0;

        //建立卡片並加上 data-index
        for (let i = 0; i < cardCount; i++) {
            const card = document.createElement('div');
            card.className = 'card';
            card.dataset.index = i;
            const theta = step * i;
            card.style.transform = `rotateY(${theta}deg) translateZ(${radius}px)`;
            carousel.appendChild(card);
        }

        //設定放大卡牌
        function updateActiveCard() {
            const index = ((-angle / step) % cardCount + cardCount) % cardCount;
            const roundedIndex = Math.round(index);

            document.querySelectorAll('.card').forEach(card => {
                const i = parseInt(card.dataset.index);
                const theta = step * i;
                const isActive = i === Math.round(index);
                const scale = isActive ? 1.2 : 1;
                card.style.transform = `rotateY(${theta}deg) translateZ(${radius}px) scale(${scale})`;
                card.style.zindex = isActive ? 10 : 1;
            });

            document.getElementById('gameName').innerText = gameNames[roundedIndex];
        }

        //初次啟動就放大卡牌
        updateActiveCard();

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') angle -= step;
            if (e.key === 'ArrowLeft') angle += step;
            carousel.style.transform = `rotateY(${angle}deg)`;
            updateActiveCard();
        });

    </script>
</body>

</html>